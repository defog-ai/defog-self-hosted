(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[722],{4425:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/log-in",function(){return r(554)}])},2427:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(5105),o=r(761),l=r.n(o);let s=()=>(0,a.jsxs)(l(),{children:[(0,a.jsx)("title",{children:"Defog.ai - AI Assistant for Data Analysis"}),(0,a.jsx)("meta",{name:"description",content:"Train your AI data assistant on your own device"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]})},2678:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var a=r(5105),o=r(8101),l=r(5922),s=r(6815),n=r(5337),i=r(4799);let d=e=>{let{id:t,userType:r,children:d,rootClassNames:c="",contentClassNames:u="max-h-full h-full",containerClassNames:m="flex flex-col md:min-h-screen relative container mx-auto"}=e,[g,f]=(0,o.useState)([]),h=(0,l.useRouter)(),x=e=>{h.push(e)},v=()=>{localStorage.removeItem("defogUser"),localStorage.removeItem("defogToken"),localStorage.removeItem("defogUserType"),x("/log-in")},p=(0,n.usePathname)();return(0,o.useEffect)(()=>{f(("admin"==r?[{title:"Admin",href:"#!",children:[{key:"manage-database",title:"Manage Database",href:"/extract-metadata"},{key:"manage-users",title:"Manage Users",href:"/manage-users"},{key:"align-model",title:"Align Model",href:"/align-model"}]},{key:"query-data",title:"Query Data",href:"/query-data"},{key:"reports",title:"Reports",href:"/reports"},{key:"logout",classNames:"self-end",title:"Logout",href:"#",onClick:v}]:r?[{key:"query-data",title:"Query Data",href:"/query-data"},{key:"reports",title:"Reports",href:"/reports"},{key:"logout",classNames:"self-end",title:"Logout",href:"#",onClick:v}]:[]).map(e=>(e.current=e.href==p,e)).map(e=>(e.children&&(e.children=e.children.map(e=>(e.current=e.href==p,e))),e)))},[r]),(0,a.jsxs)("div",{className:(0,i.QP)(m,c),children:[g.length?(0,a.jsx)(s.jq,{rootClassNames:(0,i.QP)("border-b dark:border-dark-border","bg-white dark:bg-dark-bg-primary","text-primary-text dark:text-dark-text-primary"),items:g.map(e=>({...e,classNames:(0,i.QP)(e.classNames,"hover:bg-gray-100 dark:hover:bg-dark-hover",e.current&&"bg-gray-100 dark:bg-dark-hover")}))}):(0,a.jsx)(a.Fragment,{}),(0,a.jsx)("div",{className:u,children:d})]})}},554:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var a=r(5105),o=r(8101),l=r(5922),s=r(2427),n=r(9175),i=r(2678);let d=(0,o.createContext)(null);function c({clientId:e,nonce:t,onScriptLoadSuccess:r,onScriptLoadError:a,children:l}){let s=function(e={}){let{nonce:t,onScriptLoadSuccess:r,onScriptLoadError:a}=e,[l,s]=(0,o.useState)(!1),n=(0,o.useRef)(r);n.current=r;let i=(0,o.useRef)(a);return i.current=a,(0,o.useEffect)(()=>{let e=document.createElement("script");return e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.nonce=t,e.onload=()=>{var e;s(!0),null===(e=n.current)||void 0===e||e.call(n)},e.onerror=()=>{var e;s(!1),null===(e=i.current)||void 0===e||e.call(i)},document.body.appendChild(e),()=>{document.body.removeChild(e)}},[t]),l}({nonce:t,onScriptLoadSuccess:r,onScriptLoadError:a}),n=(0,o.useMemo)(()=>({clientId:e,scriptLoadedSuccessfully:s}),[e,s]);return o.createElement(d.Provider,{value:n},l)}let u={large:40,medium:32,small:20};function m({onSuccess:e,onError:t,useOneTap:r,promptMomentNotification:a,type:l="standard",theme:s="outline",size:n="large",text:i,shape:c,logo_alignment:m,width:g,locale:f,click_listener:h,containerProps:x,...v}){let p=(0,o.useRef)(null),{clientId:y,scriptLoadedSuccessfully:k}=function(){let e=(0,o.useContext)(d);if(!e)throw Error("Google OAuth components must be used within GoogleOAuthProvider");return e}(),b=(0,o.useRef)(e);b.current=e;let w=(0,o.useRef)(t);w.current=t;let N=(0,o.useRef)(a);return N.current=a,(0,o.useEffect)(()=>{var e,t,a,o,d,u,x,j,_;if(k)return null===(a=null===(t=null===(e=null==window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===t?void 0:t.id)||void 0===a||a.initialize({client_id:y,callback:e=>{var t,r;if(!(null==e?void 0:e.credential))return null===(t=w.current)||void 0===t?void 0:t.call(w);let{credential:a,select_by:o}=e;b.current({credential:a,clientId:null!==(r=null==e?void 0:e.clientId)&&void 0!==r?r:null==e?void 0:e.client_id,select_by:o})},...v}),null===(u=null===(d=null===(o=null==window?void 0:window.google)||void 0===o?void 0:o.accounts)||void 0===d?void 0:d.id)||void 0===u||u.renderButton(p.current,{type:l,theme:s,size:n,text:i,shape:c,logo_alignment:m,width:g,locale:f,click_listener:h}),r&&(null===(_=null===(j=null===(x=null==window?void 0:window.google)||void 0===x?void 0:x.accounts)||void 0===j?void 0:j.id)||void 0===_||_.prompt(N.current)),()=>{var e,t,a;r&&(null===(a=null===(t=null===(e=null==window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===t?void 0:t.id)||void 0===a||a.cancel())}},[y,k,r,l,s,n,i,c,m,g,f]),o.createElement("div",{...x,ref:p,style:{height:u[n],...null==x?void 0:x.style}})}var g=r(9157),f=r(6815);let h=()=>{let[e,t]=(0,o.useState)(""),[r,s]=(0,o.useContext)(n.R),i=(0,o.useContext)(f.oS),d=(0,l.useRouter)(),u=async e=>{console.log("Login Success: ",e);let t=await fetch((0,g.A)("http","login_google"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credential:e.credential})});if(t.ok){let e=await t.json();e.error&&(console.error(e.error),i.error(e.error)),"success"===e.status&&(s({user:e.user_email,token:e.token,userType:e.user_type}),localStorage.setItem("defogUser",e.user_email),localStorage.setItem("defogToken",e.token),localStorage.setItem("defogUserType",e.user_type),d.push("/"))}};return(0,o.useEffect)(()=>{(async()=>{let e=await fetch((0,g.A)("http","get_google_client_id"),{method:"POST"});if(e.ok){let r=await e.json();r.google_client_id&&t(r.google_client_id)}})()},[]),(0,a.jsx)("div",{children:e?(0,a.jsx)(c,{clientId:e,children:(0,a.jsx)(m,{buttonText:"Log In with Google",onSuccess:u,onFailure:e=>{console.error("Login Failed: ",e),i.error(data.error)},cookiePolicy:"single_host_origin"})}):null})};var x=r(6485);let v=()=>{let[e,t]=(0,o.useContext)(n.R),r=(0,l.useRouter)(),d=(0,o.useContext)(f.oS);(0,o.useEffect)(()=>{localStorage.removeItem("analysisTrees"),localStorage.removeItem("analyseDataResults")});let c=async e=>{e.preventDefault();let a=Object.fromEntries(new FormData(e.target)),o=(x.env.NEXT_PUBLIC_AGENTS_ENDPOINT||"")+"/login",l=await fetch(o,{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}),s=await l.json();"success"===s.status?(t({user:a.username,token:s.token,userType:s.user_type}),localStorage.setItem("defogUser",a.username),localStorage.setItem("defogToken",s.token),localStorage.setItem("defogUserType",s.user_type),"admin"===s.user_type?r.push("/extract-metadata"):r.push("/query-data")):d.error("Login failed. Please contact your administrator.")};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.A,{}),(0,a.jsx)(i.A,{children:(0,a.jsxs)("div",{className:"flex min-h-full flex-1 flex-col justify-center px-6 py-12 lg:px-8 mt-16",children:[(0,a.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm",children:[(0,a.jsx)("img",{alt:"Defog.ai",src:"/logo512.png",className:"mx-auto h-10 w-auto"}),(0,a.jsx)("h2",{className:"mt-10 text-center text-2xl font-bold leading-9 tracking-tight text-gray-900 dark:text-dark-text-primary",children:"Sign in to Defog"})]}),(0,a.jsxs)("div",{className:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm",children:[(0,a.jsxs)("form",{onSubmit:c,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium leading-6 text-gray-900 dark:text-dark-text-primary",children:"Username"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("input",{id:"username",name:"username",type:"text",required:!0,autoComplete:"username",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 dark:text-dark-text-primary shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-dark-border dark:bg-dark-bg-secondary placeholder:text-gray-400 dark:placeholder:text-gray-600 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium leading-6 text-gray-900 dark:text-dark-text-primary",children:"Password"})}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("input",{id:"password",name:"password",type:"password",required:!0,autoComplete:"current-password",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 dark:text-dark-text-primary shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-dark-border dark:bg-dark-bg-secondary placeholder:text-gray-400 dark:placeholder:text-gray-600 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6"})})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",className:"flex w-full justify-center rounded-md bg-blue-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600 dark:bg-blue-700 dark:hover:bg-blue-600",children:"Sign in"})})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(h,{})}),(0,a.jsxs)("p",{className:"mt-10 text-center text-sm text-gray-500 dark:text-gray-400",children:["Don't have an API key?"," ",(0,a.jsx)("a",{href:"https://defog.ai/signup",className:"font-semibold leading-6 text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300",children:"Get Started Free"})]})]})]})})]})}},9157:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(6485);let o=(e,t)=>{if("http"!==e&&"ws"!==e)throw Error("Protocol not supported");return""!==t?"ws"===e?"".concat((a.env.NEXT_PUBLIC_AGENTS_ENDPOINT||"").replace("http","ws"),"/").concat(t):"".concat(a.env.NEXT_PUBLIC_AGENTS_ENDPOINT||"","/").concat(t):"".concat(a.env.NEXT_PUBLIC_AGENTS_ENDPOINT||"")}}},e=>{var t=t=>e(e.s=t);e.O(0,[894,636,593,792],()=>t(4425)),_N_E=e.O()}]);